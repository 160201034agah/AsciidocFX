<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title></title>
</head>
<body>
<script src="/js/jquery.js"></script>
<script>

    function createFileTree(text) {

        var split = text.split("\n");

        var result = [];

        var level = /\||\¦|\│|\+|\├/g;
        var path = /\w.*/;
        var lastBranchBack = /^(\\|\`|\└)((\-|\─){2})/;
        var lastBranch = /(\|.*)(\\|\`|\└)(\-|\─){2}/;

        for (var i in split) {
            var line = split[i];

            var match = line.match(level);
            match = match || [];

            var value = line.match(path);
            value = value || [];

            var hash = {
                key: match.length,
                value: value[0]
            };

            if (lastBranch.test(line)) {
                hash.key = hash.key + 1;
                if(lastBranch.test(split[i-1]))
                    hash.key = hash.key + 1;
            }

            if(lastBranchBack.test(line))
                hash.key = hash.key + 1;

            if(value[0])
            result.push(hash);

        }

        return JSON.stringify(result);
    }

</script>
<!--<script type="text/javascript" src="https://getfirebug.com/firebug-lite.js"></script>-->
</body>
</html>